import geb.module.Select

class CustomSelectModule extends Select {
    String value() {
        def seleniumSelect = getSelect()
        def selectedOption = seleniumSelect.firstSelectedOption
        if (selectedOption) {
            return selectedOption.getAttribute("value")
        }
        // Fallback: Check for selected="" explicitly
        def element = getElement()
        def selected = element.find("option[selected]")
        selected?.getAttribute("value") ?: null
    }
}
